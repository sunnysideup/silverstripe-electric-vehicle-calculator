var $jscomp={scope:{},findInternal:function(b,c,d){b instanceof String&&(b=String(b));for(var a=b.length,e=0;e<a;e++){var f=b[e];if(c.call(d,f,e,b))return{i:e,v:f}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[c]=d.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,c,d,a){if(c){d=$jscomp.global;b=b.split(".");for(a=0;a<b.length-1;a++){var e=b[a];e in d||(d[e]={});d=d[e]}b=b[b.length-1];a=d[b];c=c(a);c!=a&&null!=c&&$jscomp.defineProperty(d,b,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,d){return $jscomp.findInternal(this,b,d).v}},"es6-impl","es3");jQuery(document).ready(function(){EVC.init()});
var EVC={debug:!1,myData:{},yearsBeforeSwitch:-1,yearsAfterSwitch:-1,kmDrivenPerDay:-1,serverKey:"",isLocked:!1,isChanged:!1,baseLink:"",numberOfSteps:10,isReadyToCalculate:function(){return 0<EVC.ActualData.CVValueToday&&0<EVC.ActualData.kmDrivenPerDay},init:function(){this.myData=new EVCfx(-1==this.yearsBeforeSwitch?EVC.ActualData.yearsBeforeSwitch:this.yearsBeforeSwitch,-1==this.yearsAfterSwitch?EVC.ActualData.yearsAfterSwitch:this.yearsAfterSwitch,-1==this.kmDrivenPerDay?EVC.ActualData.kmDrivenPerDay:
this.kmDrivenPerDay);EVC.HTMLInteraction.init();EVC.HTMLInteraction.updateScreen()},cloneObject:function(b){if(null===b||"object"!==typeof b)return b;var c=b.constructor(),d;for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return c}},EVCfx=function(b,c,d){b="undefined"===typeof b||-1==b?EVC.ActualData.yearsBeforeSwitch:b;c="undefined"===typeof c||-1==c?EVC.ActualData.yearsAfterSwitch:c;d="undefined"===typeof d||-1==d?EVC.ActualData.kmDrivenPerDay:d;this.updateYearsBeforeSwitch=function(a){b=a};this.updateYearsAfterSwitch=
function(a){c=a};this.updateKmDrivenPerDay=function(a){d=a};this.hasCar=function(a){return"f"==a?100<EVC.ActualData.CVValueToday?!0:!1:!0};this.expectedKmsPerYearBasedOnOdo=function(a){a=this.actualAnnualKmsPerDay(a);if(0<a)return a;Math.round(EVC.ActualData.todaysOdoMeter/EVC.ActualData.yearOfManufacturing)};this.currentPrice=function(a){EVC.ActualData.newPrice-.5*this.yearsReduction()-.5*this.kmsReduction()};this.calendarYearOfSwitch=function(a){return(new Date).getYear()+b};this.kmsTravelledAtSwitch=
function(a){return EVC.ActualData.todaysOdoMeter+b*this.expectedKmsPerYearBasedOnOdo("f")};this.yearsOldAtSwitch=function(a){this.calendarYearOfSwitch()-EVC.ActualData.yearOfManufacturing};this.numberOfKMsToZero=function(a){return EVC.ActualData.mininimumOdoToZero+EVC.ActualData.newPrice/EVC.ActualData.dividerOfNewValueOdoToZero};this.currentPriceBasedOnNewPrice=function(a){var b=this.yearsOldAtSwitch()+c,d=EVC.ActualData.newPrice;a=this.depreciationRate(a);for(var g=0;g<=b;g++)d-=d*(a-g/EVC.ActualData.dividerDeprPerValueYear);
return d};this.currentPriceBasedOnKms=function(a){a=this.kmsTravelledAtSwitch(a)+c*this.expectedKmsPerYearBasedOnOdo(a);var b=EVC.ActualData.newPrice,d=this.numberOfKMsToZero();return b-a/d*b};this.setupCost=function(a){return 0==c?"e"==a?EVC.ActualData.setupChargeStation:0:0};this.depreciationRate=function(a){return"e"==a?EVC.ActualData.depreciationRatePerYearEV:EVC.ActualData.depreciationRatePerYearCV};this.currentCarValueAtTimeOfSale=function(a){a=EVC.ActualData.CVValueToday;if(0<b)for(var c=this.depreciationRate("f"),
d=b;0<d;d--)a-=c/100*a;return a};this.minimumCostElectricVehicleAtYearOfSwitch=function(a){a=EVC.ActualData.minimumCostElectricVehicle;if(0<b)for(var c=b;0<c;c--)a-=EVC.ActualData.EVValueImprovementPerYearPercentage/100*a;return a};this.maximumCostElectricVehicleAtYearOfSwitch=function(a){a=EVC.ActualData.maximumCostElectricVehicle;if(0<b)for(var c=b;0<c;c--)a-=EVC.ActualData.EVValueImprovementPerYearPercentage/100*a;return a};this.salePrice=function(a){return"e"==a?0:this.currentCarValueAtTimeOfSale(a)-
this.currentCarValueAtTimeOfSale(a)*(EVC.ActualData.saleCostForCarInPercentage/100)};this.salePriceExSalesCost=function(a){return this.salePrice(a)/(1-EVC.ActualData.saleCostForCarInPercentage/100)};this.purchasePrice=function(a){if("e"==a){var c=this.currentCarValueAtTimeOfSale(a),d=this.minimumCostElectricVehicleAtYearOfSwitch(a);a=this.maximumCostElectricVehicleAtYearOfSwitch(a);var g=EVC.ActualData.upgradeCostToGoElectric/100;if(0<b)for(var g=g/b,k=EVC.ActualData.EVValueImprovementPerYearPercentage/
100,h=b;0<h;h--)c+=c*g,c-=c*k;else c+=c*g;c+=EVC.ActualData.purchaseCostForCarInPercentage/100*c;c<d&&(c=d);c>a&&(c=a);return c}return 0};this.purchasePriceExSalesCost=function(a){return this.purchasePrice(a)/(1+EVC.ActualData.purchaseCostForCarInPercentage/100)};this.costOfSwap=function(a){if(0==c&&"e"==a){a=this.salePriceExSalesCost("f")-this.salePrice("f");var b=this.purchasePrice("e")-this.purchasePriceExSalesCost("e");return a+b}return 0};this.valueStartOfTheYear=function(a){var b="e"==a?this.purchasePriceExSalesCost(a):
this.salePriceExSalesCost(a);if(c){a=this.depreciationRate(a)/100;for(var d=c;0<d;d--)b-=b*a}return b};this.valueAtTheEndOfTheYear=function(a){var b=this.depreciationRate(a)/100;a=this.valueStartOfTheYear(a);return a-a*b};this.replacementSaving=function(a){return Math.round(EVC.ActualData.CVValueToday*(this.depreciationRate(a)/150))};this.totalLoanAtStart=function(a){if("e"==a){a=this.purchasePrice(a);var b=this.salePrice("f")-EVC.ActualData.amountOfCurrentCarAsLoan;return a-b}return EVC.ActualData.amountOfCurrentCarAsLoan};
this.standardPrincipalRepaymentPerYear=function(a){var b=EVC.ActualData.principalRepaymentsPerYearPercentage/100;return this.totalLoanAtStart(a)*b};this.amountBorrowedAtStartOfTheYear=function(a){var b=c*this.standardPrincipalRepaymentPerYear(a);a=this.totalLoanAtStart(a)-b;return 0>a?0:a};this.amountBorrowedAtEndOfTheYear=function(a){a=this.amountBorrowedAtStartOfTheYear(a)-this.standardPrincipalRepaymentPerYear(a);return 0>a?0:a};this.principalRepayment=function(a){var b=this.standardPrincipalRepaymentPerYear(a);
a=this.amountBorrowedAtStartOfTheYear(a);return a>b?b:a};this.interest=function(a){for(var b=0,c=EVC.ActualData.financingCostInPercentage/100/365,d=1;366>d;d++){var k=this.amountBorrowedAtStartOfTheYear(a)-this.principalRepayment(a)/365*d;0<k&&(b+=k*c)}return b};this.cashLeftAfterSellingCar=function(a){a=this.valueAtTheEndOfTheYear(a)-this.amountBorrowedAtEndOfTheYear(a);return a-EVC.ActualData.saleCostForCarInPercentage/100*a};this.equityImprovementAtEndOfYear=function(a){return this.cashLeftAfterSellingCar("e")-
this.cashLeftAfterSellingCar("f")};this.insuranceCost=function(a){return EVC.ActualData.insuranceBaseCost+this.valueStartOfTheYear(a)/1E3*EVC.ActualData.insuranceCostPerThousand};this.licensingAndWOFCost=function(a){return"e"==a?EVC.ActualData.licenseWOFCostEVPerYear:EVC.ActualData.licenseWOFCostCVPerYear};this.actualAnnualKmsPerDay=function(a){return this.hasCar(a)?(a="e"==a?d-EVC.ActualData.daysWithContinuousTripsOver100Km*EVC.ActualData.kilometresPerDayForLongTrips/365:d,0>a&&(a=0),a):0};this.actualAnnualKms=
function(a){a=365*this.actualAnnualKmsPerDay(a);0>a&&(a=0);return a};this.fuelCost=function(a){return"e"==a?this.actualAnnualKms(a)/EVC.ActualData.fuelEfficiencyEV*EVC.ActualData.costOfElectricityPerKwH:this.actualAnnualKms(a)/EVC.ActualData.fuelEfficiencyCV*EVC.ActualData.costOfPetrolPerLitre};this.fuelCostPerWeek=function(a){return this.fuelCost(a)/52};this.maintenanceCost=function(a){return"e"==a?maintanceCost=this.actualAnnualKms(a)/1E4*EVC.ActualData.maintenanceEVPerTenThousandKm:maintanceCost=
this.actualAnnualKms(a)/1E4*EVC.ActualData.maintenanceCVPerTenThousandKm};this.tyreCost=function(a){var b=this.actualAnnualKms(a)/EVC.ActualData.averageKmsPerTyre*4;return"e"==a?b*EVC.ActualData.tyreCostEV:b*EVC.ActualData.tyreCostCV};this.repairCost=function(a){var b=this.valueStartOfTheYear(a);a=this.actualAnnualKms(a)/EVC.ActualData.repairKMDivider;var c=0,b=-1*(b-EVC.ActualData.maxCarValueForRepairs)/EVC.ActualData.valueDividerForRepairCalculation;0<b&&(c=Math.pow(b,EVC.ActualData.exponentialGrowthFactorForRepairs)*
a);return c};this.carRentalCost=function(a){return"e"==a?EVC.ActualData.daysWithContinuousTripsOver100Km*EVC.ActualData.costPerDayRentalCar:0};this.numberOfKMsWithRentalCar=function(a){return"e"==a?EVC.ActualData.daysWithContinuousTripsOver100Km*EVC.ActualData.kilometresPerDayForLongTrips:0};this.carRentaFuel=function(a){return this.numberOfKMsWithRentalCar(a)/EVC.ActualData.fuelEfficiencyRentalCar*EVC.ActualData.costOfPetrolPerLitre};this.subsidy=function(a){if("e"==a){var b=0;0==c&&(b=EVC.ActualData.subsidyPaymentFixed);
return-1*(b+EVC.ActualData.subsidyPaymentPerKM*this.actualAnnualKms(a))}return 0};this.personalContribution=function(a){return"e"==a?-1*(EVC.ActualData.personalContributionFixed+EVC.ActualData.personalContributionPerKM*this.actualAnnualKms(a)):0};this.totalUpFrontPayment=function(a){return this.setupCost(a)};this.totalFinanceCost=function(a){return this.interest(a)+this.principalRepayment(a)+this.replacementSaving(a)};this.totalFixedCost=function(a){return this.insuranceCost(a)+this.licensingAndWOFCost(a)};
this.totalOperatingCost=function(a){return this.fuelCost(a)+this.maintenanceCost(a)+this.tyreCost(a)+this.repairCost(a)};this.totalOtherCost=function(a){if("e"==a){var b=this.carRentalCost(a);this.carRentaFuel(a);var c=this.subsidy(a);a=this.personalContribution(a);return b+c+a}return 0};this.totalCostYear1=function(a){return this.totalCostPerYear(a,0)};this.totalCostYear2=function(a){return this.totalCostPerYear(a,1)};this.totalCostYear3=function(a){return this.totalCostPerYear(a,2)};this.totalCostYear4=
function(a){return this.totalCostPerYear(a,3)};this.totalCostYear5=function(a){return this.totalCostPerYear(a,4)};this.totalCostPerYear=function(a,b){var d=c;c=b;var e=this.totalCombined(a);c=d;return e};this.totalCombinedFiveYears=function(a){return this.totalCostYear1(a)+this.totalCostYear2(a)+this.totalCostYear3(a)+this.totalCostYear4(a)+this.totalCostYear5(a)};this.totalCombined=function(a){return parseFloat(this.totalUpFrontPayment(a))+parseFloat(this.totalFinanceCost(a))+parseFloat(this.totalFixedCost(a))+
parseFloat(this.totalOperatingCost(a))+parseFloat(this.totalOtherCost(a))};this.costPerKM=function(a){return this.totalCombined(a)/this.actualAnnualKms(a)};this.totalProfit=function(){EVC.debug&&(this.debug(),EVC.debug=!1);return this.totalCombined("f")-this.totalCombined("e")};this.totalProfitWithEquity=function(){return this.totalProfit()+this.equityImprovementAtEndOfYear()};this.debug=function(){var a="hasCar setupCost depreciationRate currentCarValueAtTimeOfSale minimumCostElectricVehicleAtYearOfSwitch maximumCostElectricVehicleAtYearOfSwitch salePrice salePriceExSalesCost purchasePrice purchasePriceExSalesCost costOfSwap valueStartOfTheYear valueAtTheEndOfTheYear totalLoanAtStart standardPrincipalRepaymentPerYear amountBorrowedAtStartOfTheYear amountBorrowedAtEndOfTheYear principalRepayment interest cashLeftAfterSellingCar insuranceCost licensingAndWOFCost actualAnnualKms actualAnnualKmsPerDay fuelCost fuelCostPerWeek maintenanceCost repairCost tyreCost carRentalCost numberOfKMsWithRentalCar carRentaFuel subsidy personalContribution".split(" "),
e=a.length,f;console.debug("===========================");console.debug("yearsBeforeSwitch: "+b);console.debug("yearsAfterSwitch: "+c);console.debug("kmDrivenPerDay: "+d);console.debug("baseLink: "+EVC.baseLink);console.debug("serverKey: "+EVC.serverKey);console.debug("IsLocked: "+(EVC.isLocked?"true":"false"));for(var g=0;g<e;g++)f=a[g],"hasCar"===f?console.debug(f+": "+this[f]("f")+" ||| "+this[f]("e")):console.debug(f+": "+Math.round(parseFloat(this[f]("f")))+" ||| "+Math.round(parseFloat(this[f]("e"))))};
return this};
EVC.HTMLInteraction={isStartup:!0,hasRangeSlider:!0,hasGraphs:!0,isTouchScreen:null,init:function(){this.clear();this.hasRangeSlider=(this.isTouchScreen=this.isTouchScreenTest())?!0:!1;this.buildKeyAssumptionForm();this.buildPlayAroundAssumptionForm();this.buildOtherAssumptionsForm();this.populateLinks();this.setupShowAndHideResultRows();this.inlineExpandListener();this.hasRangeSlider||this.makeGraphClickable();EVC.isReadyToCalculate()?(this.hideStartup(),this.selectFirstInput()):(this.hideDetails(),window.setTimeout(function(){EVC.isReadyToCalculate()&&
(EVC.HTMLInteraction.hideStartup(),EVC.HTMLInteraction.selectFirstInput())},500))},clear:function(){jQuery("body").addClass("not-ready");jQuery("#KeyAssupmptions").html("");jQuery("#PlayAroundAssumptions").html("");jQuery("#OtherAssumptions").html("");jQuery("tr.detail").hide();jQuery("a.expandRows").unbind("click")},isTouchScreenTest:function(){null===this.isTouchScreen&&(this.isTouchScreen="ontouchstart"in window||navigator.maxTouchPoints);return this.isTouchScreen},buildKeyAssumptionForm:function(){jQuery("#KeyAssupmptions").html("<h2>"+
EVC.DataDescription.headerTitles.keyAssumptions+"</h2>"+this.createFormFieldsFromList(EVC.DataDescription.keyAssumptionKeys))},buildPlayAroundAssumptionForm:function(){jQuery("#PlayAroundAssumptions").html("<h2>"+EVC.DataDescription.headerTitles.playAroundAssumptions+"</h2>"+this.createFormFieldsFromList(EVC.DataDescription.playAroundAssumptionKeys))},buildOtherAssumptionsForm:function(){jQuery("#OtherAssumptions").html("<h2>"+EVC.DataDescription.headerTitles.otherAssumptions+"</h2>"+this.createFormFieldsFromList(EVC.DataDescription.otherAssumptionKeys))},
populateResultTable:function(){jQuery("#ResultTableHolder table th, #ResultTableHolder table td, #SummaryResultHolder table th, #SummaryResultHolder table td").each(function(b,c){var d=jQuery(c).parents("tr").attr("data-fx"),a=jQuery(c).attr("data-type");d&&a&&(a=1==EVC.myData.hasCar(a)?EVC.myData[d](a):0,a=parseFloat(a),"number"===typeof a?(format=EVC.DataDescription.alternativeFormatsForFxs[d],a="undefined"==typeof format?a.formatMoney():"number"==format?a.formatNumber():"percentage"==format?a.formatPercentage():
"kmPerDay"==format?a.kmPerYearFormat():a,jQuery(c).text(a)):jQuery(c).text("error"));if(jQuery(c).hasClass("detailHeader")){if(0==jQuery(c).children().length)var e=jQuery(c).text(),e='<a href="#" class="influencerLink" onclick="return EVC.scenarios.checkInfluenceForRowEntry(this, \'myData\', \''+d+"');\">"+e+"</a>";else if(d=jQuery(c).find("a.hasInfluencersOpened").get(0))d.click(),d.click();jQuery(c).html(e)}})},populateCalculations:function(){jQuery("span.calcVal").each(function(b,c){if(EVC.isReadyToCalculate()){var d=
jQuery(c).attr("data-fx"),a=EVC.scenarios[d](),e=parseFloat(a),f=e;"fiveYearProfit"===d&&(f=Math.abs(e));d=f.formatMoney();a=0>a?'<span class="negativeNumber">'+d+"</span>":'<span class="positiveNumber">'+d+"</span>";"number"===typeof e?jQuery(c).html(a):jQuery(c).text("error");jQuery(c).parent().fadeIn()}else jQuery(c).parent().fadeOut()});jQuery(".straightFillers").each(function(b,c){var d=jQuery(c).attr("data-fx");d?(d=EVC.scenarios[d](),jQuery(c).html(d)):console.error("Could not find method on element")})},
populateLinks:function(){jQuery(".saveLink").each(function(b,c){"yes"==jQuery(c).attr("data-replace-link")&&jQuery(c).attr("data-default-href",jQuery(c).attr("href")).addClass("hideWithoutServerInteraction")});jQuery(".saveLink").click(function(b){var c=this,d="",a=jQuery(c).attr("data-replace-link");b=EVC.serverInteraction.workableLinks();if(!0!==b&&"yes"==a)alert("Could not save data ... please try again");else if(!0===b){b=!0===EVC.isChanged?prompt("Please enter a title for your calculation sheet"):
"ignore";var e=EVC.serverInteraction.lockLink();if(null===b)return EVC.debug&&console.debug("cancelled"),!1;b=encodeURIComponent(b);EVC.debug&&console.debug("running AJAX: lock link"+e+" answer"+b);jQuery.ajax({method:"GET",url:e,data:{title:b},cache:!1}).done(function(b){if("yes"==a){var e=encodeURIComponent(b);d=jQuery(c).attr("data-default-href");d=d.replace("[DECODED_LINK]",b);d=d.replace("[ENCODED_LINK]",e);jQuery(c).attr("href",d);EVC.debug&&console.debug("redirecting to: "+d)}else EVC.debug&&
console.debug("no need to replace link"),d=jQuery(c).attr("href");window.location=d;return!0}).fail(function(b,c){alert("Error in application - link data can not be saved: "+c);followLink="";a="yes";return!1})}else{if("no"==a)return EVC.debug&&console.debug("redirect without saving"),!0;alert("could not run command")}return!1})},updateLinks:function(){1==EVC.serverInteraction.workableLinks()&&1==EVC.isReadyToCalculate()?jQuery(".saveLink.hideWithoutServerInteraction").show():jQuery(".saveLink.hideWithoutServerInteraction").hide()},
setupShowAndHideResultRows:function(){jQuery("a.expandRows").on("click",function(b){b.preventDefault();jQuery(this).toggleClass("show");jQuery(this).closest("tr").toggleClass("expanded").nextUntil("tr.summary").each(function(b,d){jQuery(d).toggle()});return!1})},hideStartup:function(){jQuery("#start-up-screen").hide();jQuery("#ElectricVehicleCalculator").show()},hideDetails:function(){jQuery("#ElectricVehicleCalculator").hide();jQuery("#HowMuchDoWeSave a").click(function(b){EVC.HTMLInteraction.transitionFromStartupToResults();
return!1});window.setTimeout(function(){jQuery('input[name="startup-car-value"]').focus()},300)},transitionFromStartupToResults:function(){jQuery("body").addClass("loading");var b=jQuery('input[name="startup-car-value"]').val(),b=parseFloat(b.replace(/[^0-9.]/g,"")),c=jQuery('input[name="petrol-spent-per-week"]').val(),c=parseFloat(c.replace(/[^0-9.]/g,"")),c=c/EVC.DefaultData.costOfPetrolPerLitre*EVC.DefaultData.fuelEfficiencyCV/7,d=!0;0===parseInt(c)&&(jQuery('input[name="petrol-spent-per-week"]').focus(),
d=!1);0===parseInt(b)&&jQuery('input[name="startup-car-value"]').focus();d?(EVC.HTMLInteraction.setValue("CVValueToday",b),EVC.HTMLInteraction.setValue("kmDrivenPerDay",c),jQuery("#start-up-screen").slideUp(function(){jQuery("#ElectricVehicleCalculator").slideDown(function(){window.setTimeout(function(){jQuery("#CVValueTodayField").change();jQuery("body").removeClass("loading");jQuery("#ProfitAndLoss").addClass("full-screen")},500);jQuery("#ViewDetailsNow a").click(function(a){EVC.HTMLInteraction.transitionFromResultsToDetails();
return!1})})})):(alert("Please answer both questions."),jQuery("body").removeClass("loading"));return!1},transitionFromResultsToDetails:function(){jQuery("#ViewDetailsNow").remove();jQuery("#ProfitAndLoss").removeClass("full-screen");return!1},selectFirstInput:function(){window.setTimeout(function(){jQuery("#CVValueTodayDisplay").click()},300)},makeGraphClickable:function(){jQuery("canvas").on("click",function(b){b=EVC.graphMaker.currentGraph.getPointsAtEvent(b);b=parseFloat(b[0].label.replace(/\$|,/g,
""));var c=jQuery(this).attr("data-for");jQuery("#"+c+"Field").val(b).change()})},createFormFieldsFromList:function(b){var c="",d="";this.isTouchScreenTest()&&(d=' readonly="readonly" ');for(var a in b)if(b.hasOwnProperty(a)){var e=b[a],f=EVC.DataDescription.labels[a],g=EVC.DataDescription.desc[a],k=a+"Holder",h=a+"Field",l=a+"Display",m=a+"FieldRange",q=EVC.HTMLInteraction.getValueFromDefaultsOrSession(a,!1),t=EVC.HTMLInteraction.getValueFromDefaultsOrSession(a,!0),n=EVC.DefaultDataMinMax[a][0],
p=EVC.DefaultDataMinMax[a][1],r=Math.round((p-n)/EVC.numberOfSteps*100)/100,u='step="'+r+'"',c=c+('<div id="'+k+'" class="fieldHolder '+e+'">'),c=c+('<p id="'+a+'Modal" class="modalP"><a href="#'+k+'" class="closeModal" onclick="return EVC.HTMLInteraction.closeModal(\''+a+"');\">close</a></p>"),c=c+('<label for="'+m+'">'),c=c+("<strong onclick=\"return EVC.HTMLInteraction.showDesc('"+a+"');\">"+f+"</strong>"),c=c+('<span class="desc">'+g+"</span>"),c=c+"</label>",c=c+'<div class="middleColumn">',
c=c+('<a href="#'+k+'" class="displayValue" id="'+l+'" onclick="return EVC.HTMLInteraction.showDesc(\''+a+"');\">"+t+"</a>");EVC.HTMLInteraction.hasRangeSlider&&(c+='<input type="range" tabindex="-1" class="'+e+'" id="'+m+'" oninput="return  EVC.HTMLInteraction.showUpdatedValue(\''+a+"', this);\" onchange=\"return EVC.HTMLInteraction.setValue('"+a+'\', this);" value="'+q+'"  min="'+n+'" max="'+p+'" step="'+r+'" />');c+='<input type="number" inputmode="numeric" pattern="[0-9]*"  class="'+e+'" oninput="return  EVC.HTMLInteraction.startInput(\''+
a+'\', this);" id="'+h+'" onclick="return EVC.HTMLInteraction.clickInput(\''+a+"', this);\" onfocus=\"return EVC.HTMLInteraction.inputReady('"+a+"', this);\" onchange=\"return EVC.HTMLInteraction.setValue('"+a+'\', this);" value="'+q+'" '+d+' min="'+n+'" max="'+p+'" '+u+" />";c+="</div>";EVC.HTMLInteraction.hasGraphs&&(c+='<p class="graphShower"><a href="#'+a+'Chart" onclick="return EVC.HTMLInteraction.showGraphNow(\''+a+"')\">view influence graph \u21e3</a></p>",c+='<figure id="'+a+'Chart" class="chartHolder"><figcaption></figcaption><canvas data-for="'+
a+'"></canvas></figure>');c+="</div>"}return c},getValueFromDefaultsOrSession:function(b,c){var d=EVC.ActualData[b];return c?this.formatValue(b,d):d},formatValue:function(b,c){var d=EVC.DataDescription.keyAssumptionKeys[b];"undefined"==typeof d&&(d=EVC.DataDescription.playAroundAssumptionKeys[b],"undefined"==typeof d&&(d=EVC.DataDescription.otherAssumptionKeys[b],"undefined"==typeof d&&(d="error")));c=parseFloat(c);switch(d){case "number":c=c.formatNumber();break;case "percentage":c=c.formatPercentage();
break;case "kmPerDay":c=c.kmPerYearFormat();break;default:c=c.formatMoney()}return c},clickInput:function(b,c){jQuery(c).removeAttr("readonly");jQuery(c).focus();jQuery(c).select();return!0},inputReady:function(b,c){EVC.HTMLInteraction.showDesc(b)},showUpdatedValue:function(b,c){var d=jQuery(c).val();jQuery("#"+(b+"Field")).val(d);this.startInput(b,c)},startInput:function(b,c){jQuery("#ProfitAndLoss .calcVal").text("calculating ...");this.isTouchScreenTest()&&(jQuery("#ProfitAndLoss p.good").hide(),
jQuery("#ProfitAndLoss p.warning").show())},updateInProgress:!1,setValue:function(b,c,d){!0!==d&&(d=!1);if(this.updateInProgress)console.error("Application can not be updated right now.");else{this.updateInProgress=!0;var a=b+"Field",e=b+"FieldRange",f=b+"Display",g="#"+b+"Holder",k="#"+b+"Holder label strong",h=EVC.DefaultData[b],l="",m=!1;isNaN(c)?(m=EVC.isChanged=!0,d=jQuery(c).val(),d=parseFloat(d.replace(/\$|,/g,"")),isNaN(d)?(d=EVC.ActualData[b],isNaN(d)&&(d=h)):l=jQuery(c).attr("id")):(d&&
(m=EVC.isChanged=!0),d=c);d=Math.round(100*d)/100;c=EVC.DataDescription.labels[b];d!=h?(0<h?jQuery(k).text(c+" (default = "+this.formatValue(b,h)+")"):jQuery(k).text(c),jQuery(g).addClass("changed")):(jQuery(k).text(c),jQuery(g).removeClass("changed"));"kmDrivenPerDay"==b&&3<d/365&&(d=Math.round(d/365),l="");a!=l&&jQuery("#"+a).val(d);e!=l&&jQuery("#"+e).val(d);a=this.formatValue(b,d);jQuery("#"+f).text(a);EVC.serverInteraction.workableLinks()&&jQuery.ajax({method:"GET",url:EVC.serverInteraction.saveLink(),
data:{key:b,value:d},cache:!1}).done(function(a){a&&(EVC.isLocked=!1,EVC.serverKey=a)}).fail(function(a,b){alert("Data could not be saved: "+b)});EVC.ActualData[b]=d;if("kmDrivenPerDay"==b||"yearsBeforeSwitch"==b||"yearsAfterSwitch"==b)"kmDrivenPerDay"==b?EVC.myData.updateKmDrivenPerDay(d):"yearsBeforeSwitch"==b?EVC.myData.updateYearsBeforeSwitch(d):"yearsAfterSwitch"==b&&EVC.myData.updateYearsAfterSwitch(d);m&&this.updateScreen(b);this.updateInProgress=!1}return!1},showDesc:function(b,c){var d=jQuery("div#"+
b+"Holder");jQuery(".infocus").each(function(a,b){jQuery(d).attr("id")!=jQuery(b).attr("id")&&jQuery(b).removeClass("infocus").find("figure").hide()});jQuery(d).hasClass("infocus")||(d.addClass("infocus"),c||jQuery("html, body").animate({scrollTop:jQuery("#"+b+"Holder").offset().top-(jQuery("#ProfitAndLoss").height()+20)},500,function(){jQuery("#"+b+"Holder").find('input[type="number"]').focus();jQuery("#"+b+"Holder").find(".graphShower").show()}));return!1},showGraphNow:function(b){jQuery("#"+b+
"Chart").show("slow",function(){EVC.graphMaker.makeGraph(b)}).prev(".graphShower").hide();return!1},updateScreen:function(b){jQuery("body").addClass("loading");EVC.debug&&console.debug("== UPDATING SCREEN ==");this.populateResultTable();this.populateCalculations();this.updateLinks();EVC.scenarios.checkInfluence();EVC.isReadyToCalculate()?jQuery("body").removeClass("not-ready").addClass("ready"):jQuery("body").removeClass("ready").addClass("not-ready");jQuery("#ProfitAndLoss").addClass("fixed");this.isTouchScreenTest()&&
(jQuery("#ProfitAndLoss p.good").show(),jQuery("#ProfitAndLoss p.warning").hide());"undefined"!==typeof b&&EVC.graphMaker.makeGraph(b);jQuery("body").removeClass("loading")},setMyValue:function(b,c){var d=c.value,d=parseFloat(d.replace(/\$|,/g,"")),d=this.formatValue(b,d);c.value=d},resetSession:function(){alert("to be completed")},isScrolledIntoView:function(b){b=jQuery(b);var c=jQuery(window),d=c.scrollTop(),c=d+c.height(),a=b.offset().top;return a+b.height()<=c&&a>=d},openModal:function(b,c){this.showDesc(b,
!0);jQuery("body").addClass("modalMode");jQuery("#"+b+"Holder").addClass("modal");return!1},closeModal:function(b){jQuery("body").removeClass("modalMode");jQuery("#"+b+"Holder").removeClass("modal").removeClass("infocus");return!1},inlineExpandListener:function(){jQuery(".inline-expand").on("click",function(b){b.preventDefault();b=jQuery(this).attr("href");b=b.substring(b.indexOf("#"));jQuery(b).toggle("slow");return!1})}};
EVC.graphMaker={currentGraph:!1,makeGraph:function(b){"object"==typeof this.currentGraph&&this.currentGraph.destroy();var c=jQuery("figure#"+b+"Chart").children("canvas").get(0).getContext("2d");this.currentGraph=(new Chart(c)).Line(this.getData(b),this.options);c=this.currentGraph.generateLegend();jQuery("#"+b+"Chart figcaption").html(c);0<=this.indexBeforeCurrentValue&&(b=this.indexBeforeCurrentValue==this.indexAfterCurrentValue?"blue":"LightSkyBlue",this.currentGraph.datasets[0].points[this.indexBeforeCurrentValue].fillColor=
b,this.currentGraph.datasets[0].points[this.indexBeforeCurrentValue].pointHighlightFill=b,this.currentGraph.datasets[0].points[this.indexAfterCurrentValue].fillColor=b,this.currentGraph.datasets[0].points[this.indexAfterCurrentValue].pointHighlightFill=b);this.currentGraph.update();return!1},indexBeforeCurrentValue:-1,indexAfterCurrentValue:-1,getStep:function(b){},getSteps:function(b){if(2===EVC.DefaultDataMinMax[b].length){var c=EVC.DefaultDataMinMax[b][0],d=EVC.DefaultDataMinMax[b][1],a=d-c,a=
a>EVC.numberOfSteps?Math.round(a/EVC.numberOfSteps):Math.round(a/EVC.numberOfSteps*100)/100,e=0;for(EVC.DefaultDataMinMax[b][2]=[];c<=d;c+=a)EVC.DefaultDataMinMax[b][2][e]=c,e++}return EVC.DefaultDataMinMax[b][2]},getData:function(b){this.data={labels:[],datasets:[{label:"The result in profit / loss for possible entries of <u>"+EVC.DataDescription.labels[b]+"</u>:",fillColor:"rgba(220,220,220,0.2)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",
pointHighlightStroke:"rgba(220,220,220,1)",data:[]}]};for(var c=EVC.ActualData[b],d=this.getSteps(b),a=d[1]-d[0],e=0;e<d.length;e++){var f=d[e];f==c&&(this.indexAfterCurrentValue=this.indexBeforeCurrentValue=e);f>c&&f<c+a&&(this.indexBeforeCurrentValue=e-1,this.indexAfterCurrentValue=e);EVC.ActualData[b]=f;f=EVC.HTMLInteraction.formatValue(b,EVC.ActualData[b]);this.data.labels.push(f);f=EVC.scenarios.fiveYearProfit();this.data.datasets[0].data.push(f)}EVC.ActualData[b]=c;return this.data},options:{animation:!0,
animationSteps:40,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%= parseFloat(value).formatMoney() %>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!0,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["click",
"touchstart","touchmove"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:10,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%> = <%}%><%= value.formatMoney() %>",
multiTooltipTemplate:"<%= value %>",onAnimationProgress:function(){},onAnimationComplete:function(){},scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'}};
EVC.scenarios={monthNames:"January February March April May June July August September October November December".split(" "),totalProfit:function(){return EVC.myData.totalProfit()},totalProfitWithRestValue:function(){return EVC.myData.totalProfit()+EVC.myData.equityImprovementAtEndOfYear()},fiveYearProfit:function(){return this.totalProfitManyYears()},plusFiveThousand:function(){var b=parseFloat(EVC.ActualData.kmDrivenPerDay)+5E3/365;return(new EVCfx(-1,-1,b)).totalProfit()},minusFiveThousand:function(){return(new EVCfx(-1,
-1,parseFloat(EVC.ActualData.kmDrivenPerDay)-5E3/365)).totalProfit()},breakEvenYearsFromNow:function(){for(var b=0,c=0;0>=c&&13>b;)c=this.totalProfitManyYears(b),b++;b--;return b},breakEvenYear:function(){var b=this.breakEvenYearsFromNow();return(new Date).getFullYear()+b},switchDate:function(){var b=new Date,c=new Date;c.setYear(b.getFullYear()+EVC.ActualData.yearsBeforeSwitch);c.getDate();var d=c.getMonth(),c=c.getFullYear();return d===b.getMonth()&&c===b.getFullYear()?"this month":"in "+this.monthNames[d].substring(0,
3)+". "+c},betterOrWorseOff:function(){return 0<this.fiveYearProfit()?"will have saved":"will have paid an additional "+('<span class="switch-year">(switching from '+this.breakEvenYear()+" will start to be profitable)</span>")},profitLossDate:function(){var b=new Date,c=new Date;c.setYear(b.getFullYear()+5+EVC.ActualData.yearsBeforeSwitch);c.getDate();var d=c.getMonth(),c=c.getFullYear();return d===b.getMonth()&&c===b.getFullYear()+5?"in five years":"by "+this.monthNames[d].substring(0,3)+". "+c},
resultsTableYear:function(){var b=new Date;b.setYear((new Date).getFullYear()+EVC.ActualData.yearsBeforeSwitch+EVC.ActualData.yearsAfterSwitch);b.getDate();var c=b.getMonth(),b=b.getFullYear();return" starting "+this.monthNames[c].substring(0,3)+" "+b},checkInfluence:function(){EVC.ActualData.influence={};var b=EVC.DataDescription.otherAssumptionKeys,c,d,a,e,f;for(f in b)if(b.hasOwnProperty(f)){c=f+"Holder";d=f+"Influence";var g=this.checkInfluencePerKeyAndObjectMethod(f,"scenarios","fiveYearProfit",
1.1);null!==g?(a=100*g.percentage,e="<div id="+d+' class="influence">',e+="\t <em>you can change the overall outcome by "+Math.round(100*g.percentage)+"% by changing this value "+g.changeDescription+"</em>",e+='\t <span style="width: '+a+'%"></span>',e+="</div>",jQuery("#"+d).remove(),jQuery("#"+c).append(e)):jQuery("#"+c).remove("#"+d)}},checkInfluencePerKeyAndObjectMethod:function(b,c,d,a,e){var f,g,k,h;k=1/1.05;if(EVC.debug)var l=EVC[c][d](e);var m=EVC.ActualData[b];f=!1;0==m?(f=!0,g=0+(EVC.DefaultDataMinMax[b][1]-
EVC.DefaultDataMinMax[b][0])/2,actualValueTempInc=1.05*g,actualValueTempDec=g*k,g=actualValueTempInc-actualValueTempDec,k=0):(avgValue=m,g=1.05*avgValue,k*=avgValue);EVC.ActualData[b]=g;h=EVC[c][d](e);EVC.ActualData[b]=k;e=EVC[c][d](e);EVC.ActualData[b]=m;percentage=Math.abs(h/e);EVC.debug&&(c=EVC[c][d](),console.debug(b+"("+Math.round(l)+")["+Math.round(k)+","+Math.round(g)+"]: "+Math.round(e)+", "+Math.round(h)+" = "+Math.round(100*percentage)/100),l!=c&&console.debug("ERROR!: "+b+l-c));return percentage>
a||percentage<1/a?(1>percentage&&(percentage=1/percentage),percentage--,EVC.ActualData.influence[b]=[percentage],changeDescription=f?" to around "+EVC.HTMLInteraction.formatValue(b,g-k):" by "+2*Math.round(100*(1.05-1))+"%",{percentage:percentage,changeDescription:changeDescription}):null},checkInfluenceForRowEntry:function(b,c,d){var a={},e=EVC.DataDescription.otherAssumptionKeys,f,g,k=!1;if(0<jQuery(b).parent().find("div.influencers").length)jQuery(b).parent().find("div.influencers").remove(),jQuery(b).removeClass("hasInfluencersOpened");
else{jQuery(b).addClass("hasInfluencersOpened");for(var h in e)e.hasOwnProperty(h)&&(g=this.checkInfluencePerKeyAndObjectMethod(h,c,d,1.001,"f"),f=this.checkInfluencePerKeyAndObjectMethod(h,c,d,1.001,"e"),null!==f&&(k=!0,a[h]=f.percentage),null!==g&&(k=!0,a[h]=g.percentage));if(!0===k){c='<div class="influencers"><h3>check the assumptions ...</h3><ul>';for(h in a)e.hasOwnProperty(h)&&(c+='<li><a href="#'+h+'Holder" onclick="return EVC.HTMLInteraction.openModal(\''+h+"');\">"+EVC.DataDescription.labels[h]+
" (value: "+EVC.HTMLInteraction.formatValue(h,EVC.ActualData[h])+"</a>)</li>");c+="</ul></div>"}else c='<div class="influencers"><h3>no assumptions to check apart from the main values set ...</h3></div>';jQuery(b).after(c)}return!1},totalProfitManyYears:function(b,c,d,a){"undefined"===typeof b&&(b=-1);"undefined"===typeof c&&(c=0);"undefined"===typeof d&&(d=EVC.ActualData.kmDrivenPerDay);var e=0;for(a=0;5>a;a++)var f=new EVCfx(b,c+a,d),e=e+f.totalProfit();return e+=f.equityImprovementAtEndOfYear()},
listOfYears:function(){var b=(new Date).getFullYear()+EVC.ActualData.yearsBeforeSwitch,c=EVC.ActualData.yearsAfterSwitch,d,a,e="";for(d=0;5>d;d++)a=b+d,e+='<li><a href="#financial-years" onclick="return EVC.HTMLInteraction.setValue(\'yearsAfterSwitch\', '+d+', true);" class="'+(d===c?"current":"link")+'">'+a+"</a></li>";return e}};
EVC.serverInteraction={workableLinks:function(){return""!==this.baseLink&&""!==this.serverKey?!0:!1},saveLink:function(){return EVC.serverInteraction.workableLinks()?this.baseLink+"save/"+this.serverKey+"/":""},showLink:function(){return EVC.serverInteraction.workableLinks()?this.baseLink+"show/"+this.serverKey+"/":""},retrieveLink:function(){return EVC.serverInteraction.workableLinks()?this.baseLink+"retrieve/"+this.serverKey+"/":""},lockLink:function(){return EVC.serverInteraction.workableLinks()?
this.baseLink+"lock/"+this.serverKey+"/":""},listLink:function(){return EVC.serverInteraction.workableLinks()?this.baseLink+"all/":""},resetLink:function(){return EVC.serverInteraction.workableLinks()?this.baseLink+"reset/":""}};
Number.prototype.formatMoney=function(b,c,d){var a=this;b=isNaN(b=Math.abs(b))?5>Math.abs(a)&&0!=a?2:0:b;c=void 0==c?".":c;d=void 0==d?",":d;var e=0>a?"-":"",f=parseInt(a=Math.abs(+a||0).toFixed(b))+"",g=3<(g=f.length)?g%3:0;return e+"$"+(g?f.substr(0,g)+d:"")+f.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+d)+(b?c+Math.abs(a-f).toFixed(b).slice(2):"")};Number.prototype.formatPercentage=function(){return this+"%"};
Number.prototype.kmPerYearFormat=function(){return this+"km ("+parseFloat(365*this).formatNumber()+"km. per year)"};Number.prototype.formatNumber=function(){return Math.round(this,2).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")};
EVC.DataDescription={keyAssumptionKeys:{CVValueToday:"currency",kmDrivenPerDay:"kmPerDay"},playAroundAssumptionKeys:{daysWithContinuousTripsOver100Km:"number",yearsBeforeSwitch:"number",yearsAfterSwitch:"number"},otherAssumptionKeys:{minimumCostElectricVehicle:"currency",maximumCostElectricVehicle:"currency",upgradeCostToGoElectric:"percentage",EVValueImprovementPerYearPercentage:"percentage",setupChargeStation:"currency",saleCostForCarInPercentage:"percentage",purchaseCostForCarInPercentage:"percentage",
financingCostInPercentage:"percentage",principalRepaymentsPerYearPercentage:"percentage",costOfPetrolPerLitre:"currency",costOfElectricityPerKwH:"currency",fuelEfficiencyCV:"number",fuelEfficiencyEV:"number",fuelEfficiencyRentalCar:"number",insuranceBaseCost:"currency",insuranceCostPerThousand:"currency",averageKmsPerTyre:"number",tyreCostCV:"currency",tyreCostEV:"currency",licenseWOFCostCVPerYear:"currency",licenseWOFCostEVPerYear:"currency",maintenanceCVPerTenThousandKm:"currency",maintenanceEVPerTenThousandKm:"currency",
repairKMDivider:"number",maxCarValueForRepairs:"currency",exponentialGrowthFactorForRepairs:"number",valueDividerForRepairCalculation:"number",depreciationRatePerYearCV:"percentage",depreciationRatePerYearEV:"percentage",costPerDayRentalCar:"currency",kilometresPerDayForLongTrips:"number",subsidyPaymentFixed:"currency",subsidyPaymentPerKM:"currency",personalContributionFixed:"currency",personalContributionPerKM:"currency"},labels:{CVValueToday:"* Current Car Value",kmDrivenPerDay:"* Average Kilometers Driven per Day",
yearsBeforeSwitch:"Number of Years Before Switch",yearsAfterSwitch:"Number of Years after Switch",daysWithContinuousTripsOver100Km:"Big Trip Days Per Year",amountOfCurrentCarAsLoan:"Current Car: Borrowed Amount",minimumCostElectricVehicle:"Electric Car: Minimum Purchase Price",maximumCostElectricVehicle:"Electric Car: Maximum Purchase Price",upgradeCostToGoElectric:"Premium for Electrical Car",EVValueImprovementPerYearPercentage:"Relative Value Improvement per Year for Electric Cars",setupChargeStation:"Infrastructure Set Up",
saleCostForCarInPercentage:"Sale Related Costs",purchaseCostForCarInPercentage:"Purchase Related Costs",financingCostInPercentage:"Interest Rate",principalRepaymentsPerYearPercentage:"Principal Repayments per Year",costOfPetrolPerLitre:"Petrol per Litre",costOfElectricityPerKwH:"Electricity per KwH",fuelEfficiencyCV:"Current Car: KMs per litre of Petrol",fuelEfficiencyEV:"Electric Car: KMs per KwH",fuelEfficiencyRentalCar:"Rental Car: KMs per Litre of Petrol",insuranceBaseCost:"Insurance Base Price",
insuranceCostPerThousand:"Insurance per $1000 Car Value",averageKmsPerTyre:"Average KMs per Tyre",tyreCostCV:"Current Car: one Tyre",tyreCostEV:"Electric Car: one Tyre",licenseWOFCostCVPerYear:"Current Car: License and WOF per Year",licenseWOFCostEVPerYear:"Electric Car: License and WOF per Year",maintenanceCVPerTenThousandKm:"Current Car: Service per 10,000kms",maintenanceEVPerTenThousandKm:"Electric Car: Service per 10,000kms",repairKMDivider:"KM divider for unexpected repairs",maxCarValueForRepairs:"Car value where unexpected repairs start",
exponentialGrowthFactorForRepairs:"Exponential unexpected repairs growth factor",valueDividerForRepairCalculation:"Inverse value unexpected value divider",depreciationRatePerYearCV:"Current Car: Depreciation rate per Year",depreciationRatePerYearEV:"Electric Car: Depreciation rate per Year. Set a bit higher to account for battery replacement.",costPerDayRentalCar:"Cost per Day for Rental Car",kilometresPerDayForLongTrips:"KMs per Day for Long Trips",subsidyPaymentFixed:"Fixed Subsidy",subsidyPaymentPerKM:"KM Subsidy",
personalContributionFixed:"Personal Contribution per Year",personalContributionPerKM:"Personal Contribution per KM"},desc:{CVValueToday:"The price at which you can sell your current car today. If unsure, you can visit tradme.co.nz and search for cars of your make, model, and age.",kmDrivenPerDay:"Approximate kilometers you drive per day or per year - you can enter either.  There are many ways to work this out, but one of them is to look at Oil Change Stickers in your car which often contain a date and the overall KMs driven by the car up to that date.",
daysWithContinuousTripsOver100Km:"Any trip where you drive more than 150km in one go and days that you are away on such a trip (e.g. enter seven if you drive to far away holiday destination where you will be away for a week). On these big days you will rent a car so that you can cover larger distances.",yearsBeforeSwitch:"The number of years you will wait before you make the switch.  Zero means that you make the switch today.",yearsAfterSwitch:"See the results for the set number of years after you make the switch. For example, if you enter two here, then you will see the results for the year starting two year after you make the switch.",
amountOfCurrentCarAsLoan:"How much of your current car cost have you borrowed? If you paid for your current car with money you saved up then enter 0.",minimumCostElectricVehicle:"Minimum price for an electric vehicle at the moment. Because electric cars are relatively new, there are few older models and depreciated cars, therefore a minimum price may apply.",maximumCostElectricVehicle:"Maximum price for an electric vehicle at the moment. In general, the calculator tries to match your current car with an electric car of a similar value, but this number is limited up to the new price of an electric vehicle.",
upgradeCostToGoElectric:"The additional amount you will have to pay to purchase an electric car similar to your current vehicle. Excluding the standard costs of trading-in your car.",EVValueImprovementPerYearPercentage:"The expected amount of relative cost improvements of electric vehicles as compared to conventional cars powered by oil based fuel for each year.",setupChargeStation:"The cost of setting up a charging station at your home (or work) to charge your electric car. If your home has a garage with a plug then the cost could be zero.",
saleCostForCarInPercentage:"The cost of selling a vehicle. Included are advertising costs, commissions, auction fees, government registration fees, etc... This is basically the difference between the buy and sell price of a car (i.e. the profit of the car sales person).",purchaseCostForCarInPercentage:"Any costs associated with purchasing a car that is paid by the purchaser.",financingCostInPercentage:"Interest rate charged on car loans.  It may be a good idea to increase this a little bit to cover any finance fees that are charged by most lenders. ",
principalRepaymentsPerYearPercentage:"The percentage of the value of the car (at the time of purchase) used to calculate any loan repayments.  For example, if you purchase a $10,000 vehicle and you pay $1000 per year (excluding interest) then the amount entered here is 10%.  In general, the payments should satisfy the basic requirement that a sale of the car today would ensure that the total outstanding amount of the loan can be met.",costOfPetrolPerLitre:"Cost of oil based fuel (diesel / petrol) per litre.",
costOfElectricityPerKwH:"Cost of the electricity used to charge your Electric Car, per Kilowatt Hour.  This is usuall between $0.10 and $0.40cents.  You may be able to apply a special night rate for this, if you are able to charge your car at night.",fuelEfficiencyCV:"Average number of kilometers you can drive on one litre of petrol in your current car.",fuelEfficiencyEV:"Average number of kilometers you expect to drive on one Kilowatt Hour in an electric car.",fuelEfficiencyRentalCar:"Average number of kilometers you expect to drive on one litre of petrol for a rental car.",
insuranceBaseCost:"A minimum insurance fee per year",insuranceCostPerThousand:"Additional insurance fee per year per $1000 of the total value of your car.",averageKmsPerTyre:"The average number of kilometers you expect to drive before the average tyre needs to be replaced.",tyreCostCV:"Cost per tyre for your current car.",tyreCostEV:"Cost per tyre for your electric car.  This may be slightly different from a conventional car as an electric car may use a fuel efficient type of tyre.",licenseWOFCostCVPerYear:"The total amount of licensing and testing charges and fees for your current car, per year.",
licenseWOFCostEVPerYear:"The total amount of licensing and testing charges and fees for an electric car, per year.",maintenanceCVPerTenThousandKm:"The total service cost for your current car per 10,000km.  For this, you may include the replacements of parts that are expected in older parts (e.g. Cam Belt, Radiator, etc...)",maintenanceEVPerTenThousandKm:"The total service cost for your electric car per 10,000km. ",repairKMDivider:"A number used to divide the number of KMs per year. From there this number is used as a unexpected repair multiplier to basically ensure that the more you drive, the more unexpected repair cost you may have.  A typical value is 40,000.",
maxCarValueForRepairs:"The value of the car when unexpected repairs start.  For example, if set to $5,000, unexpected repairs start once the car is worth less than $5,000.",exponentialGrowthFactorForRepairs:"This is a number between 1 and 3 that is used to exponentially increase the unexpected repair cost as the value of the car decreases.",valueDividerForRepairCalculation:"When working out the unexpected repair cost for the car, we take the inverse value of the car relative to the maximum value at which repairs start.  Thus, for example, if the maximum value at which unexpected repairs start is $5000, then the inverse value increases from $0 to $5000 as the value of the car lowers from $5000 to $0.  The divider value entered here is used to divide this inverse value to get an idea of the unexpected repair value.",
depreciationRatePerYearCV:"The value reduction per year for your current car.  For this, we do not take into account kms driven. Instead, we use a relatively high, linear depreciation rate that may be applied by insurance companies and car financing companies.",depreciationRatePerYearEV:"The value reduction per year for your an electric car.  For this, we do not take into account kms driven. Instead, we use a relatively high, linear depreciation rate that may be applied by insurance companies and car financing companies.",
costPerDayRentalCar:"How much does it cost to rent a similar vehicle per day, including a full insurance package.",kilometresPerDayForLongTrips:"What are the average number of KMs you will drive on any days that you will use a rental car?",subsidyPaymentFixed:"Any subsidies as a percentage of the purchase cost from the government and/or your employer you will receive when purchasing an electric vehicle. This only applies at the time of purchase.  It is not a yearly payment.",subsidyPaymentPerKM:"Any per kilometer subsidies (government / employer) payments you will receive when driving an electric vehicle.",
personalContributionFixed:"Any yearly personal payments or value you would like to add to the total purchase price of your electric vehicle to account for your reduced emissions. This only applies at the time of purchase.  It is not a yearly payment.",personalContributionPerKM:"Any per kilometer, personal, payments or value you would like to add when driving an electric vehicle. This could, for example, be equal to the carbon credits you receive based on your reduced emissions."},alternativeFormatsForFxs:{actualAnnualKms:"number",
actualAnnualKmsPerDay:"number",numberOfKMsWithRentalCar:"number"},headerTitles:{keyAssumptions:"your current situation",playAroundAssumptions:"play around",otherAssumptions:"tweak assumptions"}};
EVC.DefaultData={CVValueToday:0,kmDrivenPerDay:0,daysWithContinuousTripsOver100Km:0,yearsBeforeSwitch:0,yearsAfterSwitch:0,amountOfCurrentCarAsLoan:0,minimumCostElectricVehicle:14E3,maximumCostElectricVehicle:2E5,upgradeCostToGoElectric:60,EVValueImprovementPerYearPercentage:15,setupChargeStation:300,saleCostForCarInPercentage:7,purchaseCostForCarInPercentage:3,financingCostInPercentage:10,principalRepaymentsPerYearPercentage:20,costOfPetrolPerLitre:2,costOfElectricityPerKwH:.2,fuelEfficiencyCV:10,
fuelEfficiencyEV:5,fuelEfficiencyRentalCar:12,insuranceBaseCost:200,insuranceCostPerThousand:20,averageKmsPerTyre:4E4,tyreCostCV:120,tyreCostEV:120,licenseWOFCostCVPerYear:250,licenseWOFCostEVPerYear:250,maintenanceCVPerTenThousandKm:400,maintenanceEVPerTenThousandKm:50,repairKMDivider:15E3,maxCarValueForRepairs:7E3,exponentialGrowthFactorForRepairs:1.7,valueDividerForRepairCalculation:100,depreciationRatePerYearCV:27,depreciationRatePerYearEV:32,costPerDayRentalCar:70,kilometresPerDayForLongTrips:300,
subsidyPaymentFixed:0,subsidyPaymentPerKM:0,personalContributionFixed:0,personalContributionPerKM:0};
EVC.DefaultDataMinMax={CVValueToday:[0,4E4],kmDrivenPerDay:[0,100],daysWithContinuousTripsOver100Km:[0,50],yearsBeforeSwitch:[0,10],yearsAfterSwitch:[0,10],amountOfCurrentCarAsLoan:[0,1E4],minimumCostElectricVehicle:[12E3,36E3],maximumCostElectricVehicle:[18E3,48E3],upgradeCostToGoElectric:[0,100],EVValueImprovementPerYearPercentage:[0,50],setupChargeStation:[0,5E3],saleCostForCarInPercentage:[0,25],purchaseCostForCarInPercentage:[0,25],financingCostInPercentage:[0,20],principalRepaymentsPerYearPercentage:[0,
50],costOfPetrolPerLitre:[1,3.5],costOfElectricityPerKwH:[.05,.5],fuelEfficiencyCV:[5,30],fuelEfficiencyEV:[1,20],fuelEfficiencyRentalCar:[5,30],insuranceBaseCost:[0,1E3],insuranceCostPerThousand:[0,200],averageKmsPerTyre:[2E4,8E4],tyreCostCV:[50,300],tyreCostEV:[50,300],licenseWOFCostCVPerYear:[0,1E3],licenseWOFCostEVPerYear:[0,1E3],maintenanceCVPerTenThousandKm:[50,500],maintenanceEVPerTenThousandKm:[50,500],repairKMDivider:[5E3,4E4],maxCarValueForRepairs:[2E3,12E3],exponentialGrowthFactorForRepairs:[.8,
3],valueDividerForRepairCalculation:[5,500],depreciationRatePerYearCV:[10,40],depreciationRatePerYearEV:[10,40],costPerDayRentalCar:[10,100],kilometresPerDayForLongTrips:[100,2E3],subsidyPaymentFixed:[0,15E3],subsidyPaymentPerKM:[0,.5],personalContributionFixed:[0,15E3],personalContributionPerKM:[0,.5]};EVC.ActualData=EVC.cloneObject(EVC.DefaultData);
